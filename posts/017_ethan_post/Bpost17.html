<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ethan Roytman">
<meta name="dcterms.date" content="2025-03-27">
<meta name="description" content="This post will test to see if ChatGPT can accurately produce a meal plan based on local restaurants.">

<title>Can ChatGPT Meal Plan for a Broke College Student? ‚Äì Ethans LLM Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-listing/list.min.js"></script>
<script src="../../site_libs/quarto-listing/quarto-listing.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-42b87b39a82bf825a50beb4648d694d8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>

  window.document.addEventListener("DOMContentLoaded", function (_event) {
    const listingTargetEl = window.document.querySelector('#listing-listing .list');
    if (!listingTargetEl) {
      // No listing discovered, do not attach.
      return; 
    }

    const options = {
      valueNames: ['listing-title','listing-author','listing-date','listing-categories','listing-description',{ data: ['index'] },{ data: ['categories'] },{ data: ['listing-date-sort'] },{ data: ['listing-file-modified-sort'] }],
      
      searchColumns: [],
    };

    window['quarto-listings'] = window['quarto-listings'] || {};
    window['quarto-listings']['listing-listing'] = new List('listing-listing', options);

    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  });

  window.addEventListener('hashchange',() => {
    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  })
  </script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ethans LLM Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Can ChatGPT Meal Plan for a Broke College Student?</h1>
                  <div>
        <div class="description">
          This post will test to see if ChatGPT can accurately produce a meal plan based on local restaurants.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Memory Recall</div>
                <div class="quarto-category">AI Reasoning</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ethan Roytman </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 27, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>I wanted to see if ChatGPT could plan an entire week of meals for just $50 near 4040 Walnut St in University City, Philadelphia. That‚Äôs not much money for seven days of eating, so the task required local knowledge, accurate price estimation, and basic math. If ChatGPT can adequately do this than broke college students across America could potentially lean to ChatGPT for meal prep. The prompt I gave was:</p>
<p>‚ÄúI have $50 to spend on food for one week in University City (specifically upenn 4040 walnut). Can you suggest a meal plan from local places, with prices, that keep me within budget?‚Äù</p>
</section>
<section id="chatgpts-response" class="level1">
<h1>ChatGPT‚Äôs Response</h1>
<p>ChatGPT returned a detailed, location-specific meal plan that looked like this:</p>
<p>Absolutely! Here‚Äôs a budget-friendly meal plan tailored for your $50 weekly food budget near 4040 Walnut St in University City, Philadelphia. This plan focuses on affordable local eateries offering satisfying meals to keep you nourished throughout the week.</p>
<p>üóìÔ∏è Weekly Meal Plan (Approx. $50 Total)</p>
<p><strong>Day 1: Monday</strong></p>
<ul>
<li><p><strong>Lunch</strong>: <em>Tacos Don Memo</em> ‚Äì 2 tacos (e.g., al pastor or chicken) for $6.</p>
<ul>
<li>üìç Located near 38th and Spruce Streets.</li>
</ul></li>
<li><p><strong>Dinner</strong>: <em>Steak Queen Food Truck</em> ‚Äì Cheesesteak for $5.</p>
<ul>
<li>üìç Typically found around 38th and Locust Streets.(<a href="https://m.yelp.com/search?find_desc=cheap+eats&amp;find_loc=University+City%2C+Philadelphia%2C+PA%2F&amp;utm_source=chatgpt.com" title="BEST of University City, Philadelphia, PA Cheap Eats - Yelp">Yelp</a>, <a href="https://www.reddit.com/r/PhiladelphiaEats/comments/1dug3lq/good_eats_around_university_city/?utm_source=chatgpt.com" title="Good Eats Around University City : r/PhiladelphiaEats - Reddit">Reddit</a>, <a href="https://www.seriouseats.com/best-cheesesteak-sandwiches-in-philadelphia-philly-slideshow?utm_source=chatgpt.com" title="Gallery: Philadelphia: 10 Amazing Cheesesteaks You Should Eat">Serious Eats</a>)</li>
</ul></li>
</ul>
<p><strong>Day 2: Tuesday</strong></p>
<p><strong>Lunch</strong>: <em>Saad‚Äôs Halal Restaurant</em> ‚Äì Chicken shawarma sandwich for $7.</p>
<ul>
<li><p>üìç 45th and Walnut Streets. <strong>Dinner</strong>: <em>Manakeesh Caf√© Bakery &amp; Grill</em> ‚Äì Za‚Äôatar manakeesh (Lebanese flatbread) for $4.</p></li>
<li><p>üìç 4420 Walnut Street.(<a href="https://m.yelp.com/search?find_desc=Cheap+Eats&amp;find_loc=Walnut+Street%2C+Philadelphia%2C+PA&amp;utm_source=chatgpt.com" title="TOP 10 BEST Cheap Eats near Walnut St, Philadelphia, PA - Yelp">Yelp</a>, <a href="https://philly.eater.com/maps/best-restaurants-university-of-pennsylvania-penn-drexel-philadelphia?utm_source=chatgpt.com" title="Where to Eat Around Penn and Drexel - Eater Philly">Eater Philly</a>, <a href="https://phillyyimby.com/2022/10/renderings-revealed-for-4040-50-walnut-street-in-university-city-west-philadelphia.html?utm_source=chatgpt.com" title="Renderings Revealed for 4040-50 Walnut Street in University City, West Philadelphia ...">Philadelphia YIMBY</a>)</p></li>
</ul>
<p><strong>Day 3: Wednesday</strong></p>
<ul>
<li><p><strong>Lunch</strong>: <em>Lyn‚Äôs Food Cart</em> ‚Äì Fried chicken with rice and cabbage for $5.</p>
<ul>
<li>üìç 40th and Walnut Streets.</li>
</ul></li>
<li><p><strong>Dinner</strong>: <em>MexiCali</em> ‚Äì Burrito bowl for $7.</p>
<ul>
<li>üìç University City area.(<a href="https://www.yelp.com/search?find_desc=Cheap+Eats&amp;find_loc=University+City%2C+Philadelphia%2C+PA+19104&amp;utm_source=chatgpt.com" title="BEST of University City, Philadelphia, PA 19104 Cheap Eats - Yelp">Yelp</a>, <a href="https://www.foodnetwork.com/restaurants/photos/best-cheap-eats-philadelphia?utm_source=chatgpt.com" title="Best Cheap Eats in Philadelphia : Food Network | Restaurants : Food Network | Food Network">Food Network</a>, <a href="https://www.ubereats.com/neighborhood/university-city-philadelphia-pa?utm_source=chatgpt.com" title="University City Food Delivery &amp; Takeout - Uber Eats">Uber Eats</a>)</li>
</ul></li>
</ul>
<p><strong>Day 4: Thursday</strong></p>
<ul>
<li><p><strong>Lunch</strong>: <em>CM Chicken</em> ‚Äì Korean fried chicken wings (small portion) for $6.</p>
<ul>
<li>üìç University City area.</li>
</ul></li>
<li><p><strong>Dinner</strong>: <em>Abyssinia Ethiopian Restaurant</em> ‚Äì Vegetarian combo platter for $8.</p>
<ul>
<li>üìç 229 S 45th Street.(<a href="https://m.yelp.com/search?find_desc=cheap+eats&amp;find_loc=University+City%2C+Philadelphia%2C+PA%2F&amp;utm_source=chatgpt.com" title="BEST of University City, Philadelphia, PA Cheap Eats - Yelp">Yelp</a>, <a href="https://www.tripadvisor.com/Restaurants-g60795-zfn20931982-zfp16-Philadelphia_Pennsylvania.html?utm_source=chatgpt.com" title="The 5 Best Cheap Eats Restaurants in University City Philadelphia">Tripadvisor</a>, <a href="https://www.seriouseats.com/best-cheesesteak-sandwiches-in-philadelphia-philly-slideshow?utm_source=chatgpt.com" title="Gallery: Philadelphia: 10 Amazing Cheesesteaks You Should Eat">Serious Eats</a>)</li>
</ul></li>
</ul>
<p><strong>Day 5: Friday</strong></p>
<ul>
<li><p><strong>Lunch</strong>: <em>Kitchen Gia</em> ‚Äì Soup and half sandwich combo for $6.</p>
<ul>
<li>üìç University City area.</li>
</ul></li>
<li><p><strong>Dinner</strong>: <em>Chatime</em> ‚Äì Noodle bowl for $7.</p>
<ul>
<li>üìç University City area.(<a href="https://www.zomato.com/philadelphia/kitchen-gia-university-city/menu?utm_source=chatgpt.com" title="Menu of Kitchen Gia, University City, Philadelphia">Zomato</a>, <a href="https://www.zomato.com/philadelphia/chattime-university-city/menu?utm_source=chatgpt.com" title="Menu of Chattime, University City, Philadelphia">Zomato</a>)</li>
</ul></li>
</ul>
<p><strong>Day 6: Saturday</strong></p>
<ul>
<li><p><strong>Lunch</strong>: <em>EAT Caf√©</em> ‚Äì Pay-what-you-can meal (suggested donation $5).</p>
<ul>
<li>üìç 3820 Lancaster Avenue.</li>
</ul></li>
<li><p><strong>Dinner</strong>: <em>Don Barriga Mexican Grill</em> ‚Äì Tacos or enchiladas for $7.</p>
<ul>
<li>üìç University City area.(<a href="https://www.visitphilly.com/media-center/press-releases/philadelphia-attractions-dining-spots-for-kids/?utm_source=chatgpt.com" title="Philadelphia Attractions &amp; Dining Spots For Kids">Visit Philadelphia</a>, <a href="https://m.yelp.com/search?find_desc=Restaurants&amp;find_loc=41ST+And+Walnut%2C+Philadelphia%2C+PA+19104&amp;utm_source=chatgpt.com" title="Best Restaurants near Walnut St &amp; S 41st St, Philadelphia, PA 19104">Yelp</a>)</li>
</ul></li>
</ul>
<p><strong>Day 7: Sunday</strong></p>
<ul>
<li><p><strong>Lunch</strong>: <em>White Dog Caf√©</em> ‚Äì Brunch special (splurge meal) for $10.</p>
<ul>
<li>üìç 3420 Sansom Street.</li>
</ul></li>
<li><p><strong>Dinner</strong>: <em>Pattaya Grill</em> ‚Äì Thai curry with rice for $8.</p>
<ul>
<li>üìç 4040 Locust Street.(<a href="https://en.wikipedia.org/wiki/Steve%27s_Prince_of_Steaks?utm_source=chatgpt.com" title="Steve's Prince of Steaks">Wikipedia</a>, <a href="https://www.tripadvisor.com/Restaurant_Review-g60795-d433743-Reviews-Pattaya_Grill-Philadelphia_Pennsylvania.html?utm_source=chatgpt.com" title="PATTAYA GRILL, Philadelphia - University City - Tripadvisor">Tripadvisor</a>)</li>
</ul></li>
</ul>
<p>This plan provides a diverse range of cuisines and keeps your daily food expenses around $7, totaling approximately $49 for the week. Adjustments can be made based on your dietary preferences and appetite. Enjoy your meals!</p>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<ul>
<li>Local accuracy: ChatGPT did well with identifying real places near 4040 Walnut. It didn‚Äôt make up any locations and also found a way to incorporate local philly cuisine and food trucks.</li>
<li>Math slip-up: Despite the clear prompt asking to stay under $50, the model didn‚Äôt stick to the budget. Prices were mostly reasonable per meal, but it didn‚Äôt account for the total number of meals over the week. This points to a limitation in multi-step numerical reasoning ‚Äî it can do rough meal pricing, but struggles with planning over time. I also don‚Äôt know how accurate the meal prices are, as I have never seen food truck prices that average around 5 dollars, but maybe I am going to the wrong ones.</li>
<li>Formatting strength: The way it laid out the plan was helpful. It provided daily breakdowns, short descriptions, and bonus tips like checking happy hours or using student discounts.</li>
</ul>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>ChatGPT gave a well-formatted and localized food plan with a good variety of options around Penn‚Äôs campus. While it didn‚Äôt fully stay under the $50 constraint, it did surface relevant restaurants and organize the meals clearly. With a few adjustments (more repeat meals, skipping the splurge at White Dog), the plan could be tightened up. As-is, it‚Äôs a helpful example of ChatGPT‚Äôs potential for local planning, just don‚Äôt trust it to count every dollar for you. I would also not trust it for meal prices as explained above, I personally have never seen a 10 dollar white dog cafe ‚Äòsplurge‚Äô meal, and I don‚Äôt think it exists.</p>



</section>

<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">No matching items</div>
</div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ethanroytman\.github\.io\/comm4190_S25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>